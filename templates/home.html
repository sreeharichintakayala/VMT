{% extends "base.html" %}
{% block title %}Home - Vidyaranya Memorial Trust{% endblock %}

{% block content %}
<!-- Welcome Section -->
<script>
    // Basic right-click protection
    document.addEventListener('contextmenu', function (e) {
        e.preventDefault();
        return false;
    });

    // Disable common dev tools shortcuts
    document.addEventListener('keydown', function (e) {
        if (e.key === 'F12') {
            e.preventDefault();
            return false;
        }
        if (e.ctrlKey && e.shiftKey && e.key === 'I') {
            e.preventDefault();
            return false;
        }
        if (e.ctrlKey && e.shiftKey && e.key === 'J') {
            e.preventDefault();
            return false;
        }
        if (e.ctrlKey && e.key === 'U') {
            e.preventDefault();
            return false;
        }
    });
</script>

<script>
    // Enable Bootstrap dropdowns to show on hover for nav-bar
    document.querySelectorAll('.navbar .dropdown').forEach(function (dropdown) {
        dropdown.addEventListener('mouseenter', function () {
            const menu = this.querySelector('.dropdown-menu');
            if (menu) {
                menu.classList.add('show');
            }
        });
        dropdown.addEventListener('mouseleave', function () {
            const menu = this.querySelector('.dropdown-menu');
            if (menu) {
                menu.classList.remove('show');
            }
        });
    });
</script>

<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
<section class="py-5 text-center sr-reveal">
    <h1 class="text-teal fw-bold mb-3">Welcome to Vidyaranya Memorial Trust</h1>
    <p class="lead">Dedicated to holistic well-being through mind-body therapy, spirituality, and community support.</p>
</section>

<!-- About Section -->
<section id="about" class="py-5 sr-reveal">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6 mb-4 mb-md-0">
                <img src="{{ url_for('static', filename='images/vision.png') }}" class="img-fluid rounded shadow"
                    alt="About VMT" />
            </div>
            <div class="col-md-6">
                <h2 class="fw-bold text-teal mb-3">About Us</h2>
                <p>Established in the year 2004, Vidyaranya Memorial Trust is dedicated to Late. Nanduri Vidyaranya.
                    Vidayaranya was a Vedic Scholar who studied Vedas & Sastras at Sringeri Shankar Muttam, Karnataka.
                    India. He completed his Masters in Business Administration (MBA) from Osmania University and went to
                    United States of America for doing research in Department of Mathematics, Kansas State University,
                    Kansas, USA
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Our Mission Section -->
<section id="mission" class="py-5 bg-light sr-reveal">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6 order-md-2 mb-4 mb-md-0">
                <img src="{{ url_for('static', filename='images/mission.png') }}" class="img-fluid rounded shadow"
                    alt="Our Mission" />
            </div>
            <div class="col-md-6 order-md-1">
                <h2 class="fw-bold text-teal mb-3">Our Vision & Mission</h2>
                <p>The Vidyaranya Memorial Trust envisions a world where holistic well-being is embraced through the
                    integration of mind-body therapy and spirituality. Committed to helping individuals find inner
                    peace, real happiness, and contentment, the Trust aims to empower people to cope with the stresses
                    of modern life while making a sustainable difference in the lives of the underprivileged. It strives
                    to develop mental clarity, concentration, and focus, foster compassionate relationships within
                    society, and ensure responsible stewardship of donor resources to maximize positive impact.</p>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="py-5 bg-light">
    <div class="container">
        <h2 class="text-teal fw-bold text-center mb-4">Contact Us</h2>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form id="contactForm">
                    <div class="mb-3">
                        <input type="text" class="form-control" placeholder="Your Name" name="name" required />
                    </div>
                    <div class="mb-3">
                        <input type="email" class="form-control" placeholder="Your Email" name="email" />
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control" rows="5" placeholder="Your Message" name="message"></textarea>
                    </div>
                    <button type="submit" class="btn bg-teal text-white w-100">Send Message</button>
                </form>
            </div>
        </div>
    </div>
</section>
<!-- Visiting Counter Section -->
<section class="visit-counter-section py-4">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-4">
                <div class="visit-card text-center">
                    <div class="visit-icon mb-2">
                        <i class="fas fa-eye fa-2x"></i>
                    </div>
                    <div class="visit-title">Total Visits</div>
                    <div class="visit-number">{{ visits }}</div>
                    <div class="visit-subtext">Thank you for visiting!</div>
                </div>
            </div>
        </div>
    </div>
</section>


<script>
    // Disable right-click specifically on all images
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('img').forEach(function (img) {
            img.addEventListener('contextmenu', function (e) {
                e.preventDefault();
            });
        });
    });
</script>

<!-- Feedback collection -->
<script>
    document.getElementById('contactForm').addEventListener('submit', async function (event) {
        event.preventDefault();

        const formData = new FormData(this);

        const formObject = Object.fromEntries(formData.entries());

        const jsonData = JSON.stringify(formObject);

        try {
            const response = await fetch('http://localhost:5000/feedback', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: jsonData
            });
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const result = await response.json();
            console.log('Success :', result);
            alert('Thank you for your feedback!');
            this.reset();
        }
        catch (error) {
            console.log('Error:', error);
            alert('There was an error submitting your feedback.');
        }
    });




</script>
<script>
    window.addEventListener('load', function () {
        // Remove the hash fragment from the URL without reloading the page
        if (window.location.hash) {
            history.replaceState(null, '', window.location.pathname + window.location.search);
        }
    });
</script>



{% endblock %}